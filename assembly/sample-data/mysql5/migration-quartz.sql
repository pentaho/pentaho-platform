-- Script for migrating from quarts 1.5.2 to quartz 1.7.x

USE `quartz`;

ALTER TABLE QRTZ_JOB_DETAILS 
    MODIFY JOB_NAME       VARCHAR(200), 
    MODIFY JOB_GROUP      VARCHAR(200), 
    MODIFY DESCRIPTION    VARCHAR(250), 
    MODIFY JOB_CLASS_NAME VARCHAR(250);

ALTER TABLE QRTZ_JOB_LISTENERS 
    MODIFY JOB_NAME     VARCHAR(200), 
    MODIFY JOB_GROUP    VARCHAR(200), 
    MODIFY JOB_LISTENER VARCHAR(200);
    
ALTER TABLE QRTZ_TRIGGERS
    MODIFY TRIGGER_NAME  VARCHAR(200),
    MODIFY TRIGGER_GROUP VARCHAR(200),
    MODIFY JOB_NAME      VARCHAR(200),
    MODIFY JOB_GROUP     VARCHAR(200),
    MODIFY DESCRIPTION   VARCHAR(250),
    MODIFY CALENDAR_NAME VARCHAR(200),
    ADD    PRIORITY      INTEGER NULL AFTER PREV_FIRE_TIME;
    
ALTER TABLE QRTZ_SIMPLE_TRIGGERS
    MODIFY TRIGGER_NAME    VARCHAR(200),
    MODIFY TRIGGER_GROUP   VARCHAR(200),
    MODIFY TIMES_TRIGGERED BIGINT(10);
    
ALTER TABLE QRTZ_CRON_TRIGGERS
    MODIFY TRIGGER_NAME    VARCHAR(200),
    MODIFY TRIGGER_GROUP   VARCHAR(200),
    MODIFY CRON_EXPRESSION VARCHAR(200);
    
ALTER TABLE QRTZ_BLOB_TRIGGERS
    MODIFY TRIGGER_NAME  VARCHAR(200),
    MODIFY TRIGGER_GROUP VARCHAR(200);
    
ALTER TABLE QRTZ_TRIGGER_LISTENERS
    MODIFY TRIGGER_NAME     VARCHAR(200),
    MODIFY TRIGGER_GROUP    VARCHAR(200),
    MODIFY TRIGGER_LISTENER VARCHAR(200);
    
ALTER TABLE QRTZ_CALENDARS
    MODIFY CALENDAR_NAME VARCHAR(200);
    
ALTER TABLE QRTZ_PAUSED_TRIGGER_GRPS
    MODIFY TRIGGER_GROUP  VARCHAR(200);
    
ALTER TABLE QRTZ_FIRED_TRIGGERS
    MODIFY ENTRY_ID      VARCHAR(95),
    MODIFY TRIGGER_NAME  VARCHAR(200),
    MODIFY TRIGGER_GROUP VARCHAR(200),
    MODIFY INSTANCE_NAME VARCHAR(200),
    MODIFY JOB_NAME      VARCHAR(200),
    MODIFY JOB_GROUP     VARCHAR(200),
    ADD    PRIORITY      INTEGER NOT NULL AFTER FIRED_TIME;

ALTER TABLE QRTZ_SCHEDULER_STATE
    MODIFY INSTANCE_NAME VARCHAR(200),
    DROP COLUMN RECOVERER;
